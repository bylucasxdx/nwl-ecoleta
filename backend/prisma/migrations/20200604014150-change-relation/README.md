# Migration `20200604014150-change-relation`

This migration has been generated by Lucas Medeiros at 6/4/2020, 1:41:50 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."_ItemsToPoints" (
"A" integer  NOT NULL ,"B" integer  NOT NULL )

ALTER TABLE "public"."PointsItems" DROP CONSTRAINT IF EXiSTS "PointsItems_item_id_fkey";

ALTER TABLE "public"."PointsItems" DROP CONSTRAINT IF EXiSTS "PointsItems_point_id_fkey";

CREATE UNIQUE INDEX "_ItemsToPoints_AB_unique" ON "public"."_ItemsToPoints"("A","B")

CREATE  INDEX "_ItemsToPoints_B_index" ON "public"."_ItemsToPoints"("B")

ALTER TABLE "public"."_ItemsToPoints" ADD FOREIGN KEY ("A")REFERENCES "public"."Items"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_ItemsToPoints" ADD FOREIGN KEY ("B")REFERENCES "public"."Points"("id") ON DELETE CASCADE  ON UPDATE CASCADE

DROP TABLE "public"."PointsItems";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200604011827-init..20200604014150-change-relation
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -19,19 +19,21 @@
   latitude  Float
   longitude Float
   city      String
   uf        String
+  items     Items[]
 }
 model Items {
   id        Int      @default(autoincrement()) @id
   image     String
   title     String
+  points    Points[]
 }
-model PointsItems {
-  id        Int     @default(autoincrement()) @id
-  point_id  Int
-  point     Points  @relation(fields: [point_id], references: [id])
-  item_id   Int
-  item      Items   @relation(fields: [item_id], references: [id])
-}
+// model PointsItems {
+//   id        Int     @default(autoincrement()) @id
+//   point_id  Int
+//   point     Points  @relation(fields: [point_id], references: [id])
+//   item_id   Int
+//   item      Items   @relation(fields: [item_id], references: [id])
+// }
```


